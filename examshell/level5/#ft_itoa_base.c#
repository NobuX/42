/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   ft_itoa_base.c                                     :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: mpressen <marvin@42.fr>                    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2015/12/30 02:03:51 by mpressen          #+#    #+#             */
/*   Updated: 2015/12/30 02:03:51 by mpressen         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include <stdlib.h>

int		ft_itoa_base_len(int n)
{
    int     len;

    len = 1;
    if (n < 0)
    {
        n *= -1;
        len++;
    }
    while (n > 9)
    {
        n /= 10;
        len++;
    }
    return (len);
}

char	*ft_itoa_base(int n, int base)
{
    char    *str;
    int     len;
    int     tmp;

//    if (n == -2147483648)
//        return (ft_strdup("-2147483648"));
    tmp = n;
    len = ft_itoa_len(n);
    str = (char *)malloc(sizeof(*str) * (len + 1));
    if (str)
    {
        str[len] = '\0';
        if (n < 0)
            tmp *= -1;
        while (len--)
        {
            str[len] = tmp % base + '0';
            tmp /= base;
        }
        if (n < 0)
            str[0] = '-';
        return (str);
    }
    return (ft_error_malloc("ft_itoa"));
}